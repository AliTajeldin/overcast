#!/usr/bin/env node

// Generates Markdown-formatted API documentation from module/command help functions.

var _ = require('lodash');
var utils = require('../modules/utils');
var cli = require('../modules/cli');

utils.findConfig(function () {
  utils.CONFIG_DIR = '/path/to/.overcast';
  utils.CLUSTERS_JSON = utils.CONFIG_DIR + '/clusters.json';
  utils.VARIABLES_JSON = utils.CONFIG_DIR + '/variables.json';

  _.each(utils.getCommands(), function (command, name) {
    console.log('### overcast ' + name);
    console.log('');
    console.log('```');
    // console.log('$ overcast help ' + (name === 'help' ? '' : name));
    if (command.help) {
      command.help();
    } else if (command.commands) {
      _.each(command.commands, function (command) {
        cli.compileHelp(command, true);
      });
    }
    console.log('```');
    console.log('');
  });
});
